<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RD8E3F9BEH"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RD8E3F9BEH",{anonymize_ip:!0})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Weave GitOps" href="/opensearch.xml"><title data-react-helmet="true">Getting Started | Weave GitOps</title><meta data-react-helmet="true" property="og:url" content="https://docs.gitops.weave.works//docs/next/getting-started"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting Started | Weave GitOps"><meta data-react-helmet="true" name="description" content="Weave GitOps makes it easy to get started on your GitOps journey; deploying your Kubernetes workloads in a way which is:"><meta data-react-helmet="true" property="og:description" content="Weave GitOps makes it easy to get started on your GitOps journey; deploying your Kubernetes workloads in a way which is:"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_150px.png"><link data-react-helmet="true" rel="canonical" href="https://docs.gitops.weave.works//docs/next/getting-started"><link data-react-helmet="true" rel="alternate" href="https://docs.gitops.weave.works//docs/next/getting-started" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.gitops.weave.works//docs/next/getting-started" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.5eca8642.css">
<link rel="preload" href="/assets/js/runtime~main.cf8525d1.js" as="script">
<link rel="preload" href="/assets/js/main.193f1f59.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Weave GitOps</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/intro">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/installation">Installation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active navbar__link--active" href="/docs/next/getting-started">Getting Started</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/aws-marketplace">AWS Marketplace</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs/next/intro">main</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/getting-started">main</a></li><li><a class="dropdown__link" href="/docs/getting-started">0.5.0</a></li><li><a class="dropdown__link" href="/docs/0.4.1/getting-started">0.4.1</a></li><li><a class="dropdown__link" href="/docs/0.4.0/getting-started">0.4.0</a></li><li><a class="dropdown__link" href="/docs/0.3.3/getting-started">0.3.3</a></li><li><a class="dropdown__link" href="/docs/0.3.1/getting-started">0.3.1</a></li><li><a class="dropdown__link" href="/docs/0.3.0/getting-started">0.3.0</a></li><li><a class="dropdown__link" href="/docs/0.2.5/getting-started">0.2.5</a></li><li><a class="dropdown__link" href="/docs/0.2.4/getting-started">0.2.4</a></li><li><a class="dropdown__link" href="/docs/0.2.2/getting-started">0.2.2</a></li><li><a class="dropdown__link" href="/docs/0.2.1/getting-started">0.2.1</a></li><li><a class="dropdown__link" href="/docs/0.2.0/getting-started">0.2.0</a></li><li><a class="dropdown__link" href="/docs/0.0.5/getting-started">0.0.5</a></li></ul></div><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="Weave GitOps Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Weave GitOps</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/installation">Installation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active navbar__link--active" href="/docs/next/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/aws-marketplace">AWS Marketplace</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/getting-started">main</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">0.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.4.1/getting-started">0.4.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.4.0/getting-started">0.4.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.3.3/getting-started">0.3.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.3.1/getting-started">0.3.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.3.0/getting-started">0.3.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.5/getting-started">0.2.5</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.4/getting-started">0.2.4</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.2/getting-started">0.2.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.1/getting-started">0.2.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.2.0/getting-started">0.2.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.0.5/getting-started">0.0.5</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/weaveworks/weave-gitops" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/installation">Installation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/next/getting-started">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops">gitops</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_add">gitops_add</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_add_app">gitops_add_app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_add_cluster">gitops_add_cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_beta">gitops_beta</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_beta_add">gitops_beta_add</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_beta_add_app">gitops_beta_add_app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_beta_init">gitops_beta_init</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_beta_install">gitops_beta_install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_delete">gitops_delete</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_delete_app">gitops_delete_app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_delete_cluster">gitops_delete_cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_flux">gitops_flux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_flux_status">gitops_flux_status</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_get">gitops_get</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_get_app">gitops_get_app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_get_cluster">gitops_get_cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_get_commits">gitops_get_commits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_get_credential">gitops_get_credential</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_get_template">gitops_get_template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_install">gitops_install</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_resume">gitops_resume</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_resume_app">gitops_resume_app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_suspend">gitops_suspend</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_suspend_app">gitops_suspend_app</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_ui">gitops_ui</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_ui_run">gitops_ui_run</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_uninstall">gitops_uninstall</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_upgrade">gitops_upgrade</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli-reference/gitops_version">gitops_version</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops-dashboard">GitOps Dashboard</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/aws-marketplace">AWS Marketplace</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/examples/sock-shop">Deploying the Sock Shop Application</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/gitops-automation">GitOps Automation Configuration</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cluster management</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/getting-started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/managing-existing-clusters">Managing existing clusters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/cluster-api-providers">Cluster API Providers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/templates">CAPI Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/provider-identities">CAPI Provider Identities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/deleting-a-cluster">Deleting a Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cluster-management/profiles">Profiles</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Enterprise</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/enterprise/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/enterprise/upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/enterprise/configuration">Configuration</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for Weave GitOps <b>main</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/getting-started">latest version</a></b> (0.5.0).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: main</span><div class="markdown"><header><h1 class="h1Heading_27L5">Getting Started</h1></header><p><strong>Weave GitOps</strong> makes it easy to get started on your GitOps journey; deploying your Kubernetes workloads in a way which is:</p><ul><li><strong>Declarative</strong> - desired state is expressed declaratively</li><li><strong>Versioned and immutable</strong> - including retaining complete version history</li><li><strong>Pulled Automatically</strong> - software agents automatically pull the desired state declarations from the source</li><li><strong>Continuously reconciled</strong> - software agents continuously observe actual system state and attempt to apply the desired state</li></ul><p><em>See GitOps Principles v1.0.0 - <a href="https://opengitops.dev/" target="_blank" rel="noopener noreferrer">OpenGitOps</a></em></p><p>You can learn more about <a href="https://www.weave.works/technologies/gitops/" target="_blank" rel="noopener noreferrer">What is GitOps?</a> and <a href="https://www.weave.works/product/gitops-core/" target="_blank" rel="noopener noreferrer">Weave GitOps</a> at <a href="https://weave.works" target="_blank" rel="noopener noreferrer">weave.works</a>.</p><p>Now, let&#x27;s get an app deployed with <strong>Weave GitOps</strong>! This guide will walk you through a complete end-to-end scenario from creating a fresh local Kubernetes cluster, to having an application workload being deployed and managed through GitOps.</p><p>We will:</p><ul><li>Create a new Kubernetes cluster</li><li>Install the Weave GitOps CLI</li><li>Deploy a sample application with Weave GitOps</li><li>Show GitOps reconciliation by attempting a change to the app running on the cluster, then pushing a change to the application through git</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="workshops"></a>Workshops<a class="hash-link" href="#workshops" title="Direct link to heading">#</a></h3><p>You can also join our regular workshops where we go through these steps together and can help you along the way:</p><ul><li>Next workshop: 9 Dec 2021 - <a href="https://www.meetup.com/Weave-User-Group/" target="_blank" rel="noopener noreferrer">Intro to Kubernetes &amp; GitOps + Free GitOps Workshop</a></li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pre-requisites"></a>Pre-requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">#</a></h2><p>To follow along with this guide you will need:</p><ol><li>A GitHub account</li><li>kubectl installed - <a href="https://kubernetes.io/docs/tasks/tools/#kubectl" target="_blank" rel="noopener noreferrer">instructions</a></li><li>For our Kubernetes cluster we use <a href="https://kind.sigs.k8s.io/docs/user/quick-start/" target="_blank" rel="noopener noreferrer">kind</a> which requires <a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">Docker</a>.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install-the-weave-gitops-cli"></a>Install the Weave GitOps CLI<a class="hash-link" href="#install-the-weave-gitops-cli" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><pre tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl --silent --location &quot;https://github.com/weaveworks/weave-gitops/releases/download/v0.4.1/gitops-$(uname)-$(uname -m).tar.gz&quot; | tar xz -C /tmp</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo mv /tmp/gitops /usr/local/bin</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitops version</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Alternatively, macOS users can use Homebrew:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><pre tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew tap weaveworks/tap</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">brew install weaveworks/tap/gitops</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For complete installation instructions and general pre-requisites, see the <a href="/docs/next/installation">Installation page</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-your-github-repositories"></a>Create your GitHub Repositories<a class="hash-link" href="#create-your-github-repositories" title="Direct link to heading">#</a></h2><p>Weave GitOps can be used to deploy multiple applications, each with deployment manifests in their own separate repositories, to multiple Kubernetes clusters. We store the <a href="/docs/next/gitops-automation">GitOps Automation</a> for one or more clusters in a single configuration repository for ease of management.</p><p>Whilst you can add the automation to any existing repository, including one with your application deployment manifests, we recommend using a new or empty repository for this purpose and our guide will take this approach.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1---create-a-configuration-repository"></a>1 - Create a configuration repository<a class="hash-link" href="#1---create-a-configuration-repository" title="Direct link to heading">#</a></h3><p>This is where we will push GitOps Automation manifests. Storing in git allows for easy recovery and cluster bootstrapping.</p><p>From <a href="https://github.com" target="_blank" rel="noopener noreferrer">GitHub</a> click &quot;+&quot; and create a new repository; be sure to initialize the repository. This guide assumes the name <code>gitops-config</code> is used.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2---fork-the-podinfo-sample-application-repository"></a>2 - Fork the podinfo sample application repository<a class="hash-link" href="#2---fork-the-podinfo-sample-application-repository" title="Direct link to heading">#</a></h3><p>We will be making changes to the sample application to show GitOps reconciliation in action. So we will first fork the podinfo sample repository.</p><p>Go to <a href="https://github.com/wego-example/podinfo-deploy" target="_blank" rel="noopener noreferrer">https://github.com/wego-example/podinfo-deploy</a> and fork the repository.</p><p><img alt="fork" src="/assets/images/github-fork-57c2728ad86960ae6daf272d04c19190.png"></p><p><code>Podinfo</code> is a simple web application written in Go made up of a frontend and backend component; it is designed to showcase best practices of running microservices in Kubernetes. The full application source can be found <a href="https://github.com/stefanprodan/podinfo" target="_blank" rel="noopener noreferrer">here</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── README.md</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── backend</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── deployment.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── hpa.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── service.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── frontend</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   ├── deployment.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── service.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── namespace.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2 directories, 7 files</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="prepare-your-cluster"></a>Prepare your cluster<a class="hash-link" href="#prepare-your-cluster" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3---create-the-cluster"></a>3 - Create the cluster<a class="hash-link" href="#3---create-the-cluster" title="Direct link to heading">#</a></h3><p>Open a terminal and enter the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><pre tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kind create cluster</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You should see output similar to:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Creating cluster &quot;kind&quot; ...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Ensuring node image (kindest/node:v1.21.1) 🖼</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Preparing nodes 📦</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Writing configuration 📜</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Starting control-plane 🕹️</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Installing CNI 🔌</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ✓ Installing StorageClass 💾</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Set kubectl context to &quot;kind-kind&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You can now use your cluster with:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cluster-info --context kind-kind</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Have a nice day! 👋</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4---install-weave-gitops-on-the-kubernetes-cluster"></a>4 - Install Weave GitOps on the Kubernetes cluster<a class="hash-link" href="#4---install-weave-gitops-on-the-kubernetes-cluster" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><pre tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitops install --app-config-url git@github.com:&lt;username&gt;/gitops-config</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Run the install command specifying the location of your configuration repository created in step 1.</p><p>The install will take roughly 2 minutes depending on your system.</p><p>Once complete, you will see:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">◎ verifying installation</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ image-reflector-controller: deployment ready</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ image-automation-controller: deployment ready</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ source-controller: deployment ready</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ kustomize-controller: deployment ready</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ helm-controller: deployment ready</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ notification-controller: deployment ready</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ install finished</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Deploy key generated and uploaded to git provider</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">► Writing manifests to disk</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">► Committing and pushing gitops updates for application</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">► Pushing app changes to repository</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">► Applying manifests to the cluster</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This will commit a new <code>.weave-gitops</code> folder to your configuration repository with the following files to manage the Weave GitOps runtime on the specified cluster:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── clusters</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    └── kind-kind</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ├── system</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── flux-source-resource.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── flux-system-kustomization-resource.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── flux-user-kustomization-resource.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── gitops-runtime.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── wego-app.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   └── wego-system.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        └── user</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            └── .keep</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>flux-source-resource</code>: a <a href="https://fluxcd.io/docs/concepts/#sources" target="_blank" rel="noopener noreferrer"><strong>GitRepository</strong></a> source which &quot;defines the origin of a repository containing the desired state of the system and the requirements to obtain it&quot;. This includes the <code>interval</code> which is how frequently to check for available new versions.</li><li><code>flux-system-kustomization-resource</code>: a <a href="https://fluxcd.io/docs/concepts/#kustomization" target="_blank" rel="noopener noreferrer"><strong>Flux Kustomization</strong></a> which &quot;represents a local set of Kubernetes resources (e.g. kustomize overlay) that Flux is supposed to reconcile in the cluster&quot;. This deploys the resources found under the specified path, in this case the <code>/system</code> folder, reconciling between the cluster and the declared state in Git. Where &quot;if you make any changes to the cluster using kubectl edit/patch/delete, they will be promptly reverted.&quot; based on the <code>interval</code> value.</li><li><code>flux-user-kustomization-resource</code>: another <a href="https://fluxcd.io/docs/concepts/#kustomization" target="_blank" rel="noopener noreferrer"><strong>Flux Kustomization</strong></a>, this time for anything in the <code>/user</code> folder which later in this guide will include a reference to our sample application.</li><li><code>gitops-runtime</code>: which creates the <code>wego-system</code> namespace and deploys the Flux runtime.</li><li><code>wego-app</code>: which deploys our on-cluster web UI (not currently exposed).</li><li><code>wego-system</code>: which creates our Application Custom Resource Definition (CRD).</li></ul><p>To learn more about these files, see our <a href="/docs/next/gitops-automation">GitOps Automation</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configure-weave-gitops-to-deploy-the-podinfo-application"></a>Configure Weave GitOps to deploy the podinfo application<a class="hash-link" href="#configure-weave-gitops-to-deploy-the-podinfo-application" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="5---start-the-gitops-dashboard-web-ui"></a>5 - Start the GitOps Dashboard web UI<a class="hash-link" href="#5---start-the-gitops-dashboard-web-ui" title="Direct link to heading">#</a></h3><p>Weave GitOps provides a web UI to help manage the lifecycle management of your applications.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">gitops ui run</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Running the above command will open the dashboard in your browser at <a href="http://0.0.0.0:9001/" target="_blank" rel="noopener noreferrer">http://0.0.0.0:9001/</a>.</p><p>You will see an empty Applications view as shown in the image below.</p><p><img alt="GitOps Dashboard web UI - empty applications view" src="/assets/images/dashboard-applications-empty-9ecc436ca4d687631e87d8d8bc30f2a4.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="6---add-the-podinfo-application"></a>6 - Add the podinfo application<a class="hash-link" href="#6---add-the-podinfo-application" title="Direct link to heading">#</a></h3><p>Click <strong>add application</strong> in the top right of the screen to bring up the following form:</p><p><img alt="GitOps Dashboard web UI - add applications form" src="/assets/images/dashboard-add-form-complete-430401bd1ff613fd0b42430e0bf9c49d.png"></p><p>Next fill out the form with the required values:</p><ul><li>Name: <strong>podinfo-deploy</strong></li><li>Kubernetes Namespace: <strong>wego-system</strong><ul><li><strong>Leave as default</strong>, this is where the GitOps Automation objects for the application will be deployed.</li></ul></li><li>Source Repo URL: (<strong>*<a href="mailto:git@github.com" target="_blank" rel="noopener noreferrer">git@github.com</a>:\&lt;username&gt;/podinfo-deploy</strong>)<ul><li>URL references can be in either the HTTPS <code>https://github.com/sympatheticmoose/podinfo-deploy</code> or SSH <code>git@github.com:sympatheticmoose/podinfo-deploy</code> format.</li></ul></li><li>Config Repo URL: (<strong><a href="mailto:git@github.com" target="_blank" rel="noopener noreferrer">git@github.com</a>:\&lt;username&gt;/gitops-config</strong>)<ul><li>Specify the same configuration repository from steps 1 and 4 (install).</li></ul></li><li>Path: <strong>./</strong><ul><li><strong>Leave as default</strong>, this allows you to specify a particular folder with a repository, should the repo contain more than a single application&#x27;s deployment manifests.</li></ul></li><li>Branch: (<strong>should not require changing</strong>)</li></ul><p>Click <strong>AUTHENTICATE WITH GITHUB</strong> next to the <code>Source Repo URL</code> field.</p><p>You will be prompted with a screen to copy a code from, before visiting GitHub to authorize Weave GitOps with a short-lived token to write to your repositories. Copy the code to your clipboard and click <strong>AUTHORIZE GITHUB ACCESS</strong>.</p><p>Paste the code into the screen as shown below:
<img alt="device flow activation" src="/assets/images/github-device-flow-start-99ed021dad873ab80dc11e85d0259813.png"></p><p>You should then see this confirmation:</p><p><img alt="device flow complete" src="/assets/images/github-device-flow-complete-f9a2e700c850d2f6c8dcfcff15db9988.png"></p><p>Once authorization has completed, navigate back to the GitOps Dashboard.</p><p>Click <strong>Submit</strong> in the bottom right of the form.</p><p>The screen should update with a message that the Pull Request has been created, click <strong>Open Pull Requests</strong> to review the PR in GitHub.</p><p><img alt="Pull request raised" src="/assets/images/dashboard-add-application-PR-raised-a52c136f746f1387df373973f4e209ef.png"></p><p>The Pull Request adds five additional files under the <code>.weave-gitops</code> folder in your configuration repository. In a new <code>apps</code> top level folder the following four files are added:</p><ul><li><code>app.yaml</code>: An <strong>Application custom resource</strong> with details about the deployment.</li><li><code>kustomization.yaml</code>: a <a href="https://kubectl.docs.kubernetes.io/references/kustomize/glossary/#kustomization" target="_blank" rel="noopener noreferrer"><strong>Kubernetes Kustomization</strong></a> which references the resources within this folder to deploy the workload.</li><li><code>podinfo-deploy-gitops-source</code>: a <a href="https://fluxcd.io/docs/concepts/#sources" target="_blank" rel="noopener noreferrer"><strong>GitRepository</strong></a> (described in step 4) for the application source repository.</li><li><code>podinfo-deploy-gitops-deploy</code>: a <a href="https://fluxcd.io/docs/concepts/#kustomization" target="_blank" rel="noopener noreferrer"><strong>Flux Kustomization</strong></a> (described in step 4) to deploy the application. Note you can pause the reconciliation process using <code>gitops suspend &lt;app-name&gt;</code> for i.e. debugging.</li></ul><p>Then in the <code>../clusters/kind-kind/user</code> folder:</p><ul><li>Another <a href="https://kubectl.docs.kubernetes.io/references/kustomize/glossary/#kustomization" target="_blank" rel="noopener noreferrer"><strong>Kubernetes Kustomization</strong></a> which associates the <code>podinfo-deploy</code> application with your kind cluster as a target for its deployment.</li></ul><p>So now our <code>.weave-gitops</code> folder looks like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">├── apps</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│   └── podinfo-deploy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│       ├── app.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│       ├── kustomization.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│       ├── podinfo-deploy-gitops-deploy.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">│       └── podinfo-deploy-gitops-source.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">└── clusters</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    └── kind-kind</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ├── system</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── flux-source-resource.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── flux-system-kustomization-resource.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── flux-user-kustomization-resource.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── gitops-runtime.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   ├── wego-app.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        │   └── wego-system.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        └── user</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ├── .keep</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            └── kustomization.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Merge the Pull Request to start the deployment.</p><p><img alt="Merge" src="/assets/images/podinfo-pr-merge-adcef3783f029ad5f534ff52c7865f2c.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="view-the-running-application"></a>View the running application<a class="hash-link" href="#view-the-running-application" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="7---see-application-details"></a>7 - See application details<a class="hash-link" href="#7---see-application-details" title="Direct link to heading">#</a></h3><p>As the workloads begin to be deployed, you can view the progress and check for key reconciliation status updates in the Application details page.</p><p>Navigate to the Applications view by clicking in the left menu bar, you should now see the <code>podinfo-deploy</code> application listed. Click the name of the Application to view the details page.</p><p><img alt="Weave GitOps UI" src="/assets/images/wego_ui-94190e05a64a5dd431347383af7f7dbf.png"></p><p>From the Application details page you can see the reconciled objects on your cluster, which specific commit was last fetched from Git and which was last deployed onto the cluster. The <code>sync</code> button allows you to force a reconciliation and bypass the <code>interval</code> values. <code>Remove app</code> will remove from GitHub repository and then the cluster as GitOps reconciliation takes effect.</p><p>You can also see the 10 most recent commits to your application source repository to quickly understand the changes which have occurred, with hyperlinks back to GitHub so you can find more details or revert changes as necessary.</p><p>As you can see, you have successfully deployed the app!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="8---access-the-running-application"></a>8 - Access the running application<a class="hash-link" href="#8---access-the-running-application" title="Direct link to heading">#</a></h3><p>To access the <code>podinfo</code> UI you can set up a port forward into the pod.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><pre tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward service/frontend 9898:9898 --namespace test</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Forwarding from 127.0.0.1:9898 -&gt; 9898</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Forwarding from [::1]:9898 -&gt; 9898</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now you can browse <a href="http://localhost:9898" target="_blank" rel="noopener noreferrer">http://localhost:9898</a>.</p><p>You should see something like:</p><p><img alt="Podinfo" src="/assets/images/podinfo-web-3f7103ce3dff8fcf23baf6c1c9f64167.png"></p><p>Use CTRL+C to cancel the <code>kubectl port-forward</code> command to continue with your command prompt.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="gitops-reconciliation-in-action"></a>GitOps reconciliation in action<a class="hash-link" href="#gitops-reconciliation-in-action" title="Direct link to heading">#</a></h2><p>The real aim of GitOps is not just to deploy once, but to continuously reconcile desired state in Git with live state in Kubernetes. So we will now show a change.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="9---bad-actor-time-delete-your-application"></a>9 - Bad actor time, delete your application.<a class="hash-link" href="#9---bad-actor-time-delete-your-application" title="Direct link to heading">#</a></h3><p>Let&#x27;s try deleting the <code>frontend</code> deployment and seeing what happens.</p><p>First set up a watch on the pods</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods -n test --watch</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now delete the deployment for <code>frontend</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete deployment/frontend -n test</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You will see the pod terminate, but after a short while, a new deployment will be created and a new pod created as drift was detected between our desired state and live state.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                        READY   STATUS    RESTARTS   AGE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">backend-6b944d8b-hrg7f      1/1     Running   0          2m34s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-b5nv6   1/1     Running   0          34s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-b5nv6   1/1     Terminating   0          68s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-b5nv6   0/1     Terminating   0          72s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-b5nv6   0/1     Terminating   0          72s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-b5nv6   0/1     Terminating   0          72s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-mjjcs   0/1     Pending       0          0s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-mjjcs   0/1     Pending       0          0s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-mjjcs   0/1     ContainerCreating   0          0s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-mjjcs   0/1     Running             0          2s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-64769bf658-mjjcs   1/1     Running             0          11s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="9---make-a-desired-change-to-your-application"></a>9 - Make a (desired) change to your application<a class="hash-link" href="#9---make-a-desired-change-to-your-application" title="Direct link to heading">#</a></h3><p>Edit <code>frontend/deployment.yaml</code></p><p>Change the <code>PODINFO_UI_COLOR</code> to grey:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">env</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> PODINFO_UI_COLOR</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;#888888&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can do this through the GitHub web interface (including via pull request ♥) or clone the repo locally and make the change as shown below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">git clone git@github:&lt;username&gt;/podinfo-deploy</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># make changes in /frontend/deployment.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git add .</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git commit -m &quot;change color&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">git push</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now wait for the reconciliation to take place and you should see the pods recycle</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly console"><pre tabindex="0" class="prism-code language-console codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods --namespace test</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                       READY   STATUS              RESTARTS   AGE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">backend-5cd878f8dd-rl64h   1/1     Running             0          33m</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-5c45876f-pnxrq    1/1     Running             0          6m51s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-ff74574fc-7ntw4   0/1     ContainerCreating   0          1s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And a little later:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                       READY   STATUS        RESTARTS   AGE</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">backend-5cd878f8dd-rl64h   1/1     Running       0          34m</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-5c45876f-pnxrq    0/1     Terminating   0          7m9s</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">frontend-ff74574fc-7ntw4   1/1     Running       0          19s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Notice that the backend has not changed and so the backend pod is not affected.</p><p>Restart <code>kubectl port-forward service/frontend 9898:9898 --namespace test</code> and you will see the color has changed. NB: If you use a real ingress then you wouldn&#x27;t need to do this.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="complete"></a>Complete!<a class="hash-link" href="#complete" title="Direct link to heading">#</a></h2><p><strong>Congratulations!</strong> You have achieved a GitOps deployment using Weave GitOps. We hope you continue to be successful and are available for any questions or feedback in our <a href="https://weave-community.slack.com/archives/C0248LVC719" target="_blank" rel="noopener noreferrer">Slack</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="where-next"></a>Where next?<a class="hash-link" href="#where-next" title="Direct link to heading">#</a></h3><ul><li>Learn more about GitOps from the Weaveworks <a href="https://www.weave.works/technologies/gitops/" target="_blank" rel="noopener noreferrer">Guide to GitOps</a></li><li>Read more about the <a href="/docs/next/gitops-automation">GitOps Automation</a> objects used to reconcile workloads</li><li>Get to know our <a href="https://docs.gitops.weave.works/docs/cli-reference/gitops" target="_blank" rel="noopener noreferrer">CLI</a></li><li>Get started with Cluster management with Weave GitOps Enterprise <a href="https://docs.gitops.weave.works/docs/cluster-management/getting-started" target="_blank" rel="noopener noreferrer">Weave GitOps Enterprise</a></li><li>Dive into <a href="https://fluxcd.io/" target="_blank" rel="noopener noreferrer">Flux</a>, the proven CNCF technology that provides the foundation for Weave GitOps, to learn about the configurations possible for your deployments</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/weaveworks/weave-gitops-docs/edit/main/docs/getting-started.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/cli-reference/gitops"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">gitops »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#workshops" class="table-of-contents__link">Workshops</a></li><li><a href="#pre-requisites" class="table-of-contents__link">Pre-requisites</a></li><li><a href="#install-the-weave-gitops-cli" class="table-of-contents__link">Install the Weave GitOps CLI</a></li><li><a href="#create-your-github-repositories" class="table-of-contents__link">Create your GitHub Repositories</a><ul><li><a href="#1---create-a-configuration-repository" class="table-of-contents__link">1 - Create a configuration repository</a></li><li><a href="#2---fork-the-podinfo-sample-application-repository" class="table-of-contents__link">2 - Fork the podinfo sample application repository</a></li></ul></li><li><a href="#prepare-your-cluster" class="table-of-contents__link">Prepare your cluster</a><ul><li><a href="#3---create-the-cluster" class="table-of-contents__link">3 - Create the cluster</a></li><li><a href="#4---install-weave-gitops-on-the-kubernetes-cluster" class="table-of-contents__link">4 - Install Weave GitOps on the Kubernetes cluster</a></li></ul></li><li><a href="#configure-weave-gitops-to-deploy-the-podinfo-application" class="table-of-contents__link">Configure Weave GitOps to deploy the podinfo application</a><ul><li><a href="#5---start-the-gitops-dashboard-web-ui" class="table-of-contents__link">5 - Start the GitOps Dashboard web UI</a></li><li><a href="#6---add-the-podinfo-application" class="table-of-contents__link">6 - Add the podinfo application</a></li></ul></li><li><a href="#view-the-running-application" class="table-of-contents__link">View the running application</a><ul><li><a href="#7---see-application-details" class="table-of-contents__link">7 - See application details</a></li><li><a href="#8---access-the-running-application" class="table-of-contents__link">8 - Access the running application</a></li></ul></li><li><a href="#gitops-reconciliation-in-action" class="table-of-contents__link">GitOps reconciliation in action</a><ul><li><a href="#9---bad-actor-time-delete-your-application" class="table-of-contents__link">9 - Bad actor time, delete your application.</a></li><li><a href="#9---make-a-desired-change-to-your-application" class="table-of-contents__link">9 - Make a (desired) change to your application</a></li></ul></li><li><a href="#complete" class="table-of-contents__link">Complete!</a><ul><li><a href="#where-next" class="table-of-contents__link">Where next?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items"><li class="footer__item"><a href="mailto:support@weave.works" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Weaveworks</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cf8525d1.js"></script>
<script src="/assets/js/main.193f1f59.js"></script>
</body>
</html>